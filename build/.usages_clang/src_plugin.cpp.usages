22 serialization::archive 16 0 0 0 0 34 /Users/Jonas/Documents/XEcmaScript 40 /Users/Jonas/Documents/XEcmaScript/build 0 0 879 0 0 0 1 # 1 1 1 2 18446744073709551615 7 include 1 2 1 9 18446744073709551615 12 "plugin.hpp" 1 10 1 22 18446744073709551615 1 # 3 1 3 2 18446744073709551615 7 include 3 2 3 9 18446744073709551615 1 < 3 10 3 11 18446744073709551615 7 fstream 3 11 3 18 18446744073709551615 1 > 3 18 3 19 18446744073709551615 1 # 4 1 4 2 18446744073709551615 7 include 4 2 4 9 18446744073709551615 1 < 4 10 4 11 18446744073709551615 7 sstream 4 11 4 18 18446744073709551615 1 > 4 18 4 19 18446744073709551615 1 # 5 1 5 2 18446744073709551615 7 include 5 2 5 9 18446744073709551615 1 < 5 10 5 11 18446744073709551615 6 cstdio 5 11 5 17 18446744073709551615 1 > 5 17 5 18 18446744073709551615 1 # 6 1 6 2 18446744073709551615 7 include 6 2 6 9 18446744073709551615 9 "log.hpp" 6 10 6 19 18446744073709551615 5 using 8 1 8 6 18446744073709551615 4 json 8 7 8 11 0 1 = 8 12 8 13 18446744073709551615 8 nlohmann 8 14 8 22 1 2 :: 8 22 8 24 18446744073709551615 4 json 8 24 8 28 2 1 ; 8 28 8 29 18446744073709551615 10 JSClassOps 10 1 10 11 3 14 globalclassops 10 12 10 26 4 1 = 10 27 10 28 18446744073709551615 1 { 10 29 10 30 18446744073709551615 7 nullptr 11 5 11 12 18446744073709551615 1 , 11 12 11 13 18446744073709551615 7 nullptr 12 5 12 12 18446744073709551615 1 , 12 12 12 13 18446744073709551615 7 nullptr 13 5 13 12 18446744073709551615 1 , 13 12 13 13 18446744073709551615 7 nullptr 14 5 14 12 18446744073709551615 1 , 14 12 14 13 18446744073709551615 7 nullptr 15 5 15 12 18446744073709551615 1 , 15 12 15 13 18446744073709551615 7 nullptr 16 5 16 12 18446744073709551615 1 , 16 12 16 13 18446744073709551615 7 nullptr 17 5 17 12 18446744073709551615 1 , 17 12 17 13 18446744073709551615 7 nullptr 18 5 18 12 18446744073709551615 1 , 18 12 18 13 18446744073709551615 7 nullptr 19 5 19 12 18446744073709551615 1 , 19 12 19 13 18446744073709551615 7 nullptr 20 5 20 12 18446744073709551615 1 , 20 12 20 13 18446744073709551615 7 nullptr 21 5 21 12 18446744073709551615 1 , 21 12 21 13 18446744073709551615 24 JS_GlobalObjectTraceHook 22 5 22 29 5 1 } 23 1 23 2 18446744073709551615 1 ; 23 2 23 3 18446744073709551615 7 JSClass 25 1 25 8 6 11 globalclass 25 9 25 20 7 1 = 25 21 25 22 18446744073709551615 1 { 25 23 25 24 18446744073709551615 8 "global" 26 5 26 13 18446744073709551615 1 , 26 13 26 14 18446744073709551615 20 JSCLASS_GLOBAL_FLAGS 27 5 27 25 18446744073709551615 1 , 27 25 27 26 18446744073709551615 1 & 28 5 28 6 18446744073709551615 14 globalclassops 28 6 28 20 4 1 } 29 1 29 2 18446744073709551615 1 ; 29 2 29 3 18446744073709551615 8 jsPlugin 31 1 31 9 8 2 :: 31 9 31 11 8 8 jsPlugin 31 11 31 19 8 1 ( 31 19 31 20 8 3 std 31 20 31 23 9 2 :: 31 23 31 25 18446744073709551615 6 string 31 25 31 31 10 12 pathToConfig 31 32 31 44 11 1 , 31 44 31 45 8 13 jsPluginError 31 46 31 59 12 1 * 31 60 31 61 18446744073709551615 8 errorOut 31 62 31 70 13 1 ) 31 70 31 71 8 1 { 31 72 31 73 18446744073709551615 13 jsPluginError 32 5 32 18 12 9 errortemp 32 19 32 28 14 1 = 32 29 32 30 18446744073709551615 12 XJS_NO_ERROR 32 31 32 43 15 1 ; 32 43 32 44 18446744073709551615 2 if 33 5 33 7 18446744073709551615 1 ( 33 8 33 9 18446744073709551615 8 errorOut 33 9 33 17 13 2 == 33 18 33 20 18446744073709551615 7 nullptr 33 21 33 28 18446744073709551615 1 ) 33 28 33 29 18446744073709551615 1 { 33 30 33 31 18446744073709551615 8 errorOut 34 9 34 17 13 1 = 34 18 34 19 18446744073709551615 1 & 34 20 34 21 18446744073709551615 9 errortemp 34 21 34 30 14 1 ; 34 30 34 31 18446744073709551615 1 } 35 5 35 6 18446744073709551615 4 else 35 7 35 11 18446744073709551615 1 { 35 12 35 13 18446744073709551615 1 * 36 9 36 10 18446744073709551615 8 errorOut 36 10 36 18 13 1 = 36 19 36 20 18446744073709551615 12 XJS_NO_ERROR 36 21 36 33 15 1 ; 36 33 36 34 18446744073709551615 1 } 37 5 37 6 18446744073709551615 3 try 39 1 39 4 18446744073709551615 1 { 39 5 39 6 18446744073709551615 4 json 40 5 40 9 0 12 pluginConfig 40 10 40 22 16 1 ; 40 22 40 23 18446744073709551615 1 { 41 5 41 6 18446744073709551615 3 std 42 9 42 12 9 2 :: 42 12 42 14 18446744073709551615 8 ifstream 42 14 42 22 17 10 configFile 42 23 42 33 18 1 ( 42 33 42 34 19 12 pathToConfig 42 34 42 46 11 1 ) 42 46 42 47 19 1 ; 42 47 42 48 18446744073709551615 3 std 43 9 43 12 9 2 :: 43 12 43 14 18446744073709551615 12 stringstream 43 14 43 26 20 12 configStream 43 27 43 39 21 1 ; 43 39 43 40 18446744073709551615 12 configStream 44 9 44 21 21 2 << 44 22 44 24 22 10 configFile 44 25 44 35 18 1 . 44 35 44 36 23 5 rdbuf 44 36 44 41 23 1 ( 44 41 44 42 23 1 ) 44 42 44 43 23 1 ; 44 43 44 44 18446744073709551615 12 pluginConfig 45 9 45 21 16 1 = 45 22 45 23 24 4 json 45 24 45 28 0 2 :: 45 28 45 30 25 5 parse 45 30 45 35 25 1 ( 45 35 45 36 25 12 configStream 45 36 45 48 21 1 . 45 48 45 49 26 3 str 45 49 45 52 26 1 ( 45 52 45 53 26 1 ) 45 53 45 54 26 1 . 45 54 45 55 27 5 c_str 45 55 45 60 27 1 ( 45 60 45 61 27 1 ) 45 61 45 62 27 1 ) 45 62 45 63 25 1 ; 45 63 45 64 18446744073709551615 1 } 46 5 46 6 18446744073709551615 4 name 49 5 49 9 28 1 = 49 10 49 11 29 12 pluginConfig 49 12 49 24 16 1 [ 49 24 49 25 30 6 "name" 49 25 49 31 18446744073709551615 1 ] 49 31 49 32 30 1 ; 49 32 49 33 18446744073709551615 2 if 50 5 50 7 18446744073709551615 1 ( 50 8 50 9 18446744073709551615 12 pluginConfig 50 9 50 21 16 1 [ 50 21 50 22 30 6 "type" 50 22 50 28 18446744073709551615 1 ] 50 28 50 29 30 1 . 50 29 50 30 31 3 get 50 30 50 33 31 1 < 50 33 50 34 31 3 std 50 34 50 37 9 2 :: 50 37 50 39 31 6 string 50 39 50 45 10 1 > 50 45 50 46 31 1 ( 50 46 50 47 31 1 ) 50 47 50 48 31 2 == 50 49 50 51 32 8 "global" 50 52 50 60 18446744073709551615 1 ) 50 60 50 61 18446744073709551615 1 { 50 62 50 63 18446744073709551615 4 type 50 63 50 67 33 1 = 50 68 50 69 18446744073709551615 9 JS_GLOBAL 50 70 50 79 34 1 ; 50 79 50 80 18446744073709551615 1 } 50 80 50 81 18446744073709551615 4 else 51 5 51 9 18446744073709551615 2 if 51 10 51 12 18446744073709551615 1 ( 51 13 51 14 18446744073709551615 12 pluginConfig 51 14 51 26 16 1 [ 51 26 51 27 30 6 "type" 51 27 51 33 18446744073709551615 1 ] 51 33 51 34 30 1 . 51 34 51 35 31 3 get 51 35 51 38 31 1 < 51 38 51 39 31 3 std 51 39 51 42 9 2 :: 51 42 51 44 31 6 string 51 44 51 50 10 1 > 51 50 51 51 31 1 ( 51 51 51 52 31 1 ) 51 52 51 53 31 2 == 51 54 51 56 32 10 "aircraft" 51 57 51 67 18446744073709551615 1 ) 51 67 51 68 18446744073709551615 1 { 51 69 51 70 18446744073709551615 4 type 51 70 51 74 33 1 = 51 75 51 76 18446744073709551615 11 JS_AIRCRAFT 51 77 51 88 35 1 ; 51 88 51 89 18446744073709551615 1 } 51 89 51 90 18446744073709551615 4 else 52 5 52 9 18446744073709551615 2 if 52 10 52 12 18446744073709551615 1 ( 52 13 52 14 18446744073709551615 12 pluginConfig 52 14 52 26 16 1 [ 52 26 52 27 30 6 "type" 52 27 52 33 18446744073709551615 1 ] 52 33 52 34 30 1 . 52 34 52 35 31 3 get 52 35 52 38 31 1 < 52 38 52 39 31 3 std 52 39 52 42 9 2 :: 52 42 52 44 31 6 string 52 44 52 50 10 1 > 52 50 52 51 31 1 ( 52 51 52 52 31 1 ) 52 52 52 53 31 2 == 52 54 52 56 32 9 "scenery" 52 57 52 66 18446744073709551615 1 ) 52 66 52 67 18446744073709551615 1 { 52 68 52 69 18446744073709551615 4 type 52 69 52 73 33 1 = 52 74 52 75 18446744073709551615 10 JS_SCENERY 52 76 52 86 36 1 ; 52 86 52 87 18446744073709551615 1 } 52 87 52 88 18446744073709551615 4 else 53 5 53 9 18446744073709551615 1 { 53 10 53 11 18446744073709551615 5 throw 53 11 53 16 18446744073709551615 16 XJS_CONFIG_ERROR 53 17 53 33 37 1 ; 53 33 53 34 18446744073709551615 1 } 53 34 53 35 18446744073709551615 4 path 54 5 54 9 38 1 = 54 10 54 11 29 12 pathToConfig 54 12 54 24 11 1 . 54 24 54 25 39 6 substr 54 25 54 31 39 1 ( 54 31 54 32 39 1 0 54 32 54 33 18446744073709551615 1 , 54 33 54 34 39 12 pathToConfig 54 35 54 47 11 1 . 54 47 54 48 40 12 find_last_of 54 48 54 60 40 1 ( 54 60 54 61 40 3 '/' 54 61 54 64 18446744073709551615 1 ) 54 64 54 65 40 1 ) 54 65 54 66 39 1 ; 54 66 54 67 18446744073709551615 4 Xlog 56 5 56 9 41 2 << 56 10 56 12 42 3 std 56 13 56 16 9 2 :: 56 16 56 18 18446744073709551615 6 string 56 18 56 24 10 1 ( 56 24 56 25 43 17 "Loading plugin " 56 25 56 42 18446744073709551615 1 ) 56 42 56 43 43 1 + 56 44 56 45 44 4 name 56 46 56 50 28 1 ; 56 50 56 51 18446744073709551615 26 // Init JavaScript context 58 5 58 31 18446744073709551615 7 context 59 5 59 12 45 1 = 59 13 59 14 18446744073709551615 13 JS_NewContext 59 15 59 28 46 1 ( 59 28 59 29 46 2 32 59 29 59 31 18446744073709551615 1 * 59 32 59 33 18446744073709551615 4 1024 59 34 59 38 18446744073709551615 1 * 59 39 59 40 18446744073709551615 4 1024 59 41 59 45 18446744073709551615 1 ) 59 45 59 46 46 1 ; 59 46 59 47 18446744073709551615 2 if 60 5 60 7 18446744073709551615 1 ( 60 8 60 9 18446744073709551615 1 ! 60 9 60 10 18446744073709551615 7 context 60 10 60 17 45 1 ) 60 17 60 18 18446744073709551615 1 { 60 19 60 20 18446744073709551615 1 * 61 9 61 10 18446744073709551615 8 errorOut 61 10 61 18 13 1 = 61 19 61 20 18446744073709551615 22 XJS_CONTEXT_INIT_ERROR 61 21 61 43 47 1 ; 61 43 61 44 18446744073709551615 6 return 62 9 62 15 18446744073709551615 1 ; 62 15 62 16 18446744073709551615 1 } 63 5 63 6 18446744073709551615 2 if 64 5 64 7 18446744073709551615 1 ( 64 8 64 9 18446744073709551615 1 ! 64 9 64 10 18446744073709551615 2 JS 64 10 64 12 48 2 :: 64 12 64 14 49 18 InitSelfHostedCode 64 14 64 32 49 1 ( 64 32 64 33 49 7 context 64 33 64 40 45 1 ) 64 40 64 41 49 1 ) 64 41 64 42 18446744073709551615 1 { 64 43 64 44 18446744073709551615 1 * 65 9 65 10 18446744073709551615 8 errorOut 65 10 65 18 13 1 = 65 19 65 20 18446744073709551615 22 XJS_CONTEXT_INIT_ERROR 65 21 65 43 47 1 ; 65 43 65 44 18446744073709551615 6 return 66 9 66 15 18446744073709551615 1 ; 66 15 66 16 18446744073709551615 1 } 67 5 67 6 18446744073709551615 13 JSAutoRequest 69 5 69 18 50 7 request 69 19 69 26 51 1 ( 69 26 69 27 50 7 context 69 27 69 34 45 1 ) 69 34 69 35 50 1 ; 69 35 69 36 18446744073709551615 2 JS 71 5 71 7 48 2 :: 71 7 71 9 18446744073709551615 18 CompartmentOptions 71 9 71 27 52 7 options 71 28 71 35 53 1 ; 71 35 71 36 18446744073709551615 6 global 72 5 72 11 54 1 = 72 12 72 13 18446744073709551615 3 new 72 14 72 17 18446744073709551615 2 JS 72 18 72 20 48 2 :: 72 20 72 22 18446744073709551615 22 PersistentRootedObject 72 22 72 44 55 1 ( 72 44 72 45 56 7 context 72 45 72 52 45 1 ) 72 52 72 53 56 1 ; 72 53 72 54 18446744073709551615 1 * 73 5 73 6 18446744073709551615 6 global 73 6 73 12 54 1 = 73 13 73 14 57 18 JS_NewGlobalObject 73 15 73 33 58 1 ( 73 33 73 34 58 7 context 73 34 73 41 45 1 , 73 41 73 42 58 1 & 73 43 73 44 18446744073709551615 11 globalclass 73 44 73 55 7 1 , 73 55 73 56 58 4 NULL 73 57 73 61 58 1 , 73 61 73 62 58 2 JS 73 63 73 65 48 2 :: 73 65 73 67 18446744073709551615 19 FireOnNewGlobalHook 73 67 73 86 59 1 , 73 86 73 87 58 7 options 73 88 73 95 53 1 ) 73 95 73 96 58 1 ; 73 96 73 97 18446744073709551615 2 if 75 5 75 7 18446744073709551615 1 ( 75 8 75 9 18446744073709551615 1 ! 75 9 75 10 18446744073709551615 6 global 75 10 75 16 54 1 ) 75 16 75 17 18446744073709551615 1 { 75 18 75 19 18446744073709551615 1 * 76 9 76 10 18446744073709551615 8 errorOut 76 10 76 18 13 1 = 76 19 76 20 18446744073709551615 21 XJS_GLOBAL_INIT_ERROR 76 21 76 42 60 1 ; 76 42 76 43 18446744073709551615 6 return 77 9 77 15 18446744073709551615 1 ; 77 15 77 16 18446744073709551615 1 } 78 5 78 6 18446744073709551615 4 else 78 7 78 11 18446744073709551615 2 if 78 12 78 14 18446744073709551615 1 ( 78 15 78 16 18446744073709551615 1 ! 78 16 78 17 18446744073709551615 1 * 78 17 78 18 18446744073709551615 6 global 78 18 78 24 54 1 ) 78 24 78 25 18446744073709551615 1 { 78 26 78 27 18446744073709551615 1 * 79 9 79 10 18446744073709551615 8 errorOut 79 10 79 18 13 1 = 79 19 79 20 18446744073709551615 21 XJS_GLOBAL_INIT_ERROR 79 21 79 42 60 1 ; 79 42 79 43 18446744073709551615 6 return 80 9 80 15 18446744073709551615 1 ; 80 15 80 16 18446744073709551615 1 } 81 5 81 6 18446744073709551615 17 JSAutoCompartment 83 5 83 22 61 11 compartment 83 23 83 34 62 1 ( 83 34 83 35 61 7 context 83 35 83 42 45 1 , 83 42 83 43 61 1 * 83 44 83 45 18446744073709551615 6 global 83 45 83 51 54 1 ) 83 51 83 52 61 1 ; 83 52 83 53 18446744073709551615 22 JS_InitStandardClasses 84 5 84 27 63 1 ( 84 27 84 28 63 7 context 84 28 84 35 45 1 , 84 35 84 36 63 1 * 84 37 84 38 18446744073709551615 6 global 84 38 84 44 54 1 ) 84 44 84 45 63 1 ; 84 45 84 46 18446744073709551615 10 catchError 85 5 85 15 64 1 ( 85 15 85 16 64 7 context 85 16 85 23 45 1 ) 85 23 85 24 64 1 ; 85 24 85 25 18446744073709551615 14 initXJSClasses 86 5 86 19 65 1 ( 86 19 86 20 65 7 context 86 20 86 27 45 1 , 86 27 86 28 65 1 * 86 29 86 30 18446744073709551615 6 global 86 30 86 36 54 1 ) 86 36 86 37 65 1 ; 86 37 86 38 18446744073709551615 10 catchError 87 5 87 15 64 1 ( 87 15 87 16 64 7 context 87 16 87 23 45 1 ) 87 23 87 24 64 1 ; 87 24 87 25 18446744073709551615 35 // Compile and execute script files 89 5 89 40 18446744073709551615 3 for 90 5 90 8 18446744073709551615 1 ( 90 9 90 10 18446744073709551615 4 auto 90 10 90 14 18446744073709551615 8 iterator 90 15 90 23 66 1 = 90 24 90 25 18446744073709551615 12 pluginConfig 90 26 90 38 16 1 [ 90 38 90 39 30 7 "files" 90 39 90 46 18446744073709551615 1 ] 90 46 90 47 30 1 . 90 47 90 48 67 5 begin 90 48 90 53 67 1 ( 90 53 90 54 67 1 ) 90 54 90 55 67 1 ; 90 55 90 56 18446744073709551615 8 iterator 90 57 90 65 66 2 != 90 66 90 68 68 12 pluginConfig 90 69 90 81 16 1 [ 90 81 90 82 30 7 "files" 90 82 90 89 18446744073709551615 1 ] 90 89 90 90 30 1 . 90 90 90 91 69 3 end 90 91 90 94 69 1 ( 90 94 90 95 69 1 ) 90 95 90 96 69 1 ; 90 96 90 97 18446744073709551615 8 iterator 90 98 90 106 66 2 ++ 90 106 90 108 70 1 ) 90 108 90 109 18446744073709551615 1 { 90 110 90 111 18446744073709551615 3 std 91 9 91 12 9 2 :: 91 12 91 14 18446744073709551615 6 string 91 14 91 20 10 10 scriptname 91 21 91 31 71 1 = 91 32 91 33 18446744073709551615 1 * 91 34 91 35 72 8 iterator 91 35 91 43 66 1 ; 91 43 91 44 18446744073709551615 2 JS 93 9 93 11 48 2 :: 93 11 93 13 18446744073709551615 14 CompileOptions 93 13 93 27 73 14 compileoptions 93 28 93 42 74 1 ( 93 42 93 43 73 7 context 93 43 93 50 45 1 ) 93 50 93 51 73 1 ; 93 51 93 52 18446744073709551615 2 JS 94 9 94 11 48 2 :: 94 11 94 13 18446744073709551615 6 Rooted 94 13 94 19 75 1 < 94 19 94 20 18446744073709551615 8 JSScript 94 20 94 28 76 1 * 94 28 94 29 18446744073709551615 1 > 94 29 94 30 18446744073709551615 6 script 94 31 94 37 77 1 = 94 38 94 39 18446744073709551615 2 JS 94 40 94 42 48 2 :: 94 42 94 44 18446744073709551615 12 RootedScript 94 44 94 56 78 1 ( 94 56 94 57 75 7 context 94 57 94 64 45 1 ) 94 64 94 65 75 1 ; 94 65 94 66 18446744073709551615 2 JS 96 9 96 11 48 2 :: 96 11 96 13 18446744073709551615 11 RootedValue 96 13 96 24 79 11 returnvalue 96 25 96 36 80 1 ( 96 36 96 37 75 7 context 96 37 96 44 45 1 ) 96 44 96 45 75 1 ; 96 45 96 46 18446744073709551615 4 FILE 97 9 97 13 81 1 * 97 14 97 15 18446744073709551615 7 srcfile 97 16 97 23 82 1 = 97 24 97 25 18446744073709551615 5 fopen 97 26 97 31 83 1 ( 97 31 97 32 83 1 ( 97 32 97 33 18446744073709551615 4 path 97 33 97 37 38 1 + 97 38 97 39 44 14 boostseparator 97 40 97 54 44 1 + 97 55 97 56 44 10 scriptname 97 57 97 67 71 1 ) 97 67 97 68 18446744073709551615 1 . 97 68 97 69 27 5 c_str 97 69 97 74 27 1 ( 97 74 97 75 27 1 ) 97 75 97 76 27 1 , 97 76 97 77 83 3 "r" 97 78 97 81 18446744073709551615 1 ) 97 81 97 82 83 1 ; 97 82 97 83 18446744073709551615 2 if 98 9 98 11 18446744073709551615 1 ( 98 12 98 13 18446744073709551615 1 ! 98 13 98 14 18446744073709551615 2 JS 98 14 98 16 48 2 :: 98 16 98 18 84 7 Compile 98 18 98 25 84 1 ( 98 25 98 26 84 7 context 98 26 98 33 45 1 , 98 33 98 34 84 14 compileoptions 98 35 98 49 74 1 , 98 49 98 50 84 7 srcfile 98 51 98 58 82 1 , 98 58 98 59 84 1 & 98 60 98 61 18446744073709551615 6 script 98 61 98 67 77 1 ) 98 67 98 68 84 1 ) 98 68 98 69 18446744073709551615 1 { 98 70 98 71 18446744073709551615 10 catchError 99 13 99 23 64 1 ( 99 23 99 24 64 7 context 99 24 99 31 45 1 ) 99 31 99 32 64 1 ; 99 32 99 33 18446744073709551615 1 } 100 9 100 10 18446744073709551615 2 if 101 9 101 11 18446744073709551615 1 ( 101 12 101 13 18446744073709551615 1 ! 101 13 101 14 18446744073709551615 16 JS_ExecuteScript 101 14 101 30 85 1 ( 101 30 101 31 85 7 context 101 31 101 38 45 1 , 101 38 101 39 85 6 script 101 40 101 46 77 1 , 101 46 101 47 85 1 & 101 48 101 49 18446744073709551615 11 returnvalue 101 49 101 60 80 1 ) 101 60 101 61 85 1 ) 101 61 101 62 18446744073709551615 1 { 101 63 101 64 18446744073709551615 10 catchError 102 13 102 23 64 1 ( 102 23 102 24 64 7 context 102 24 102 31 45 1 ) 102 31 102 32 64 1 ; 102 32 102 33 18446744073709551615 1 } 103 9 103 10 18446744073709551615 6 fclose 104 9 104 15 86 1 ( 104 15 104 16 86 7 srcfile 104 16 104 23 82 1 ) 104 23 104 24 86 1 ; 104 24 104 25 18446744073709551615 1 } 105 5 105 6 18446744073709551615 55 // Check for callback functions and call XPluginStart() 107 5 107 60 18446744073709551615 1 { 108 5 108 6 18446744073709551615 2 JS 109 9 109 11 48 2 :: 109 11 109 13 18446744073709551615 11 RootedValue 109 13 109 24 79 19 XJSPluginStopHandle 109 25 109 44 87 1 ( 109 44 109 45 75 7 context 109 45 109 52 45 1 ) 109 52 109 53 75 1 ; 109 53 109 54 18446744073709551615 2 JS 110 9 110 11 48 2 :: 110 11 110 13 18446744073709551615 11 RootedValue 110 13 110 24 79 4 rval 110 25 110 29 88 1 ( 110 29 110 30 75 7 context 110 30 110 37 45 1 ) 110 37 110 38 75 1 ; 110 38 110 39 18446744073709551615 2 JS 112 9 112 11 48 2 :: 112 11 112 13 18446744073709551615 14 AutoValueArray 112 13 112 27 89 1 < 112 27 112 28 18446744073709551615 1 1 112 28 112 29 18446744073709551615 1 > 112 29 112 30 18446744073709551615 4 args 112 31 112 35 90 1 ( 112 35 112 36 89 7 context 112 36 112 43 45 1 ) 112 43 112 44 89 1 ; 112 44 112 45 18446744073709551615 4 args 113 9 113 13 90 1 [ 113 13 113 14 91 1 0 113 14 113 15 18446744073709551615 1 ] 113 15 113 16 91 1 . 113 16 113 17 92 3 set 113 17 113 20 92 1 ( 113 20 113 21 92 2 JS 113 21 113 23 48 2 :: 113 23 113 25 93 14 UndefinedValue 113 25 113 39 93 1 ( 113 39 113 40 93 1 ) 113 40 113 41 93 1 ) 113 41 113 42 92 1 ; 113 42 113 43 18446744073709551615 2 if 115 9 115 11 18446744073709551615 1 ( 115 12 115 13 18446744073709551615 1 ! 115 13 115 14 18446744073709551615 14 JS_GetProperty 115 14 115 28 94 1 ( 115 28 115 29 94 7 context 115 29 115 36 45 1 , 115 36 115 37 94 1 * 115 38 115 39 18446744073709551615 6 global 115 39 115 45 54 1 , 115 45 115 46 94 13 "XPluginStop" 115 47 115 60 18446744073709551615 1 , 115 60 115 61 94 1 & 115 62 115 63 18446744073709551615 19 XJSPluginStopHandle 115 63 115 82 87 1 ) 115 82 115 83 94 1 ) 115 83 115 84 18446744073709551615 1 { 115 85 115 86 18446744073709551615 5 throw 116 13 116 18 18446744073709551615 16 XJS_NO_FUNCTIONS 116 19 116 35 95 1 ; 116 35 116 36 18446744073709551615 1 } 117 9 117 10 18446744073709551615 4 else 117 11 117 15 18446744073709551615 2 if 117 16 117 18 18446744073709551615 1 ( 117 19 117 20 18446744073709551615 1 ! 117 20 117 21 18446744073709551615 1 ( 117 21 117 22 18446744073709551615 19 XJSPluginStopHandle 117 22 117 41 87 1 . 117 41 117 42 96 8 isObject 117 42 117 50 96 1 ( 117 50 117 51 96 1 ) 117 51 117 52 96 2 && 117 53 117 55 18446744073709551615 2 JS 117 56 117 58 48 2 :: 117 58 117 60 97 10 IsCallable 117 60 117 70 97 1 ( 117 70 117 71 97 1 & 117 71 117 72 18446744073709551615 19 XJSPluginStopHandle 117 72 117 91 87 1 . 117 91 117 92 98 8 toObject 117 92 117 100 98 1 ( 117 100 117 101 98 1 ) 117 101 117 102 98 1 ) 117 102 117 103 97 1 ) 117 103 117 104 18446744073709551615 1 ) 117 104 117 105 18446744073709551615 1 { 117 106 117 107 18446744073709551615 5 throw 118 13 118 18 18446744073709551615 16 XJS_NO_FUNCTIONS 118 19 118 35 95 1 ; 118 35 118 36 18446744073709551615 1 } 119 9 119 10 18446744073709551615 4 else 119 11 119 15 18446744073709551615 2 if 119 16 119 18 18446744073709551615 1 ( 119 19 119 20 18446744073709551615 1 ! 119 20 119 21 18446744073709551615 19 JS_CallFunctionName 119 21 119 40 99 1 ( 119 40 119 41 99 7 context 119 41 119 48 45 1 , 119 48 119 49 99 1 * 119 50 119 51 18446744073709551615 6 global 119 51 119 57 54 1 , 119 57 119 58 99 14 "XPluginStart" 119 59 119 73 18446744073709551615 1 , 119 73 119 74 99 4 args 119 75 119 79 90 1 , 119 79 119 80 99 1 & 119 81 119 82 18446744073709551615 4 rval 119 82 119 86 88 1 ) 119 86 119 87 99 1 ) 119 87 119 88 18446744073709551615 1 { 119 89 119 90 18446744073709551615 10 catchError 120 13 120 23 64 1 ( 120 23 120 24 64 7 context 120 24 120 31 45 1 ) 120 31 120 32 64 1 ; 120 32 120 33 18446744073709551615 1 } 121 9 121 10 18446744073709551615 1 } 122 5 122 6 18446744073709551615 4 Xlog 123 5 123 9 41 2 << 123 10 123 12 42 29 "Successfully loaded plugin " 123 13 123 42 18446744073709551615 1 + 123 43 123 44 44 4 name 123 45 123 49 28 1 ; 123 49 123 50 18446744073709551615 1 } 124 1 124 2 18446744073709551615 5 catch 124 3 124 8 18446744073709551615 1 ( 124 9 124 10 18446744073709551615 13 jsPluginError 124 10 124 23 12 5 error 124 24 124 29 100 1 ) 124 29 124 30 18446744073709551615 1 { 124 31 124 32 18446744073709551615 1 * 125 5 125 6 18446744073709551615 8 errorOut 125 6 125 14 13 1 = 125 15 125 16 18446744073709551615 5 error 125 17 125 22 100 1 ; 125 22 125 23 18446744073709551615 4 Xlog 126 5 126 9 41 2 << 126 10 126 12 42 18 "Error in plugin " 126 13 126 31 18446744073709551615 1 + 126 32 126 33 44 4 name 126 34 126 38 28 1 + 126 39 126 40 44 4 ": " 126 41 126 45 18446744073709551615 1 + 126 46 126 47 44 10 parseError 126 48 126 58 101 1 ( 126 58 126 59 101 5 error 126 59 126 64 100 1 ) 126 64 126 65 101 1 ; 126 65 126 66 18446744073709551615 1 } 127 1 127 2 18446744073709551615 5 catch 127 3 127 8 18446744073709551615 1 ( 127 9 127 10 18446744073709551615 3 std 127 10 127 13 9 2 :: 127 13 127 15 18446744073709551615 6 string 127 15 127 21 10 5 error 127 22 127 27 102 1 ) 127 27 127 28 18446744073709551615 1 { 127 29 127 30 18446744073709551615 4 Xlog 128 5 128 9 41 2 << 128 10 128 12 42 18 "Error in plugin " 128 13 128 31 18446744073709551615 1 + 128 32 128 33 44 4 name 128 34 128 38 28 1 + 128 39 128 40 44 4 ": " 128 41 128 45 18446744073709551615 1 + 128 46 128 47 44 5 error 128 48 128 53 102 1 ; 128 53 128 54 18446744073709551615 1 } 129 1 129 2 18446744073709551615 1 } 130 1 130 2 18446744073709551615 8 jsPlugin 132 1 132 9 8 2 :: 132 9 132 11 18446744073709551615 1 ~ 132 11 132 12 18446744073709551615 8 jsPlugin 132 12 132 20 8 1 ( 132 20 132 21 18446744073709551615 1 ) 132 21 132 22 18446744073709551615 1 { 132 23 132 24 18446744073709551615 3 try 133 5 133 8 18446744073709551615 1 { 133 9 133 10 18446744073709551615 13 JSAutoRequest 134 9 134 22 50 7 request 134 23 134 30 103 1 ( 134 30 134 31 50 7 context 134 31 134 38 45 1 ) 134 38 134 39 50 1 ; 134 39 134 40 18446744073709551615 17 JSAutoCompartment 135 9 135 26 61 11 compartment 135 27 135 38 104 1 ( 135 38 135 39 61 7 context 135 39 135 46 45 1 , 135 46 135 47 61 6 global 135 48 135 54 54 2 -> 135 54 135 56 105 3 get 135 56 135 59 105 1 ( 135 59 135 60 105 1 ) 135 60 135 61 105 1 ) 135 61 135 62 61 1 ; 135 62 135 63 18446744073709551615 2 JS 136 9 136 11 48 2 :: 136 11 136 13 18446744073709551615 11 RootedValue 136 13 136 24 79 4 rval 136 25 136 29 106 1 ( 136 29 136 30 75 7 context 136 30 136 37 45 1 ) 136 37 136 38 75 1 ; 136 38 136 39 18446744073709551615 2 JS 137 9 137 11 48 2 :: 137 11 137 13 18446744073709551615 14 AutoValueArray 137 13 137 27 89 1 < 137 27 137 28 18446744073709551615 1 1 137 28 137 29 18446744073709551615 1 > 137 29 137 30 18446744073709551615 4 args 137 31 137 35 107 1 ( 137 35 137 36 89 7 context 137 36 137 43 45 1 ) 137 43 137 44 89 1 ; 137 44 137 45 18446744073709551615 4 args 138 9 138 13 107 1 [ 138 13 138 14 91 1 0 138 14 138 15 18446744073709551615 1 ] 138 15 138 16 91 1 . 138 16 138 17 92 3 set 138 17 138 20 92 1 ( 138 20 138 21 92 2 JS 138 21 138 23 48 2 :: 138 23 138 25 108 9 NullValue 138 25 138 34 108 1 ( 138 34 138 35 108 1 ) 138 35 138 36 108 1 ) 138 36 138 37 92 1 ; 138 37 138 38 18446744073709551615 2 if 139 9 139 11 18446744073709551615 1 ( 139 11 139 12 18446744073709551615 1 ! 139 12 139 13 18446744073709551615 19 JS_CallFunctionName 139 13 139 32 99 1 ( 139 32 139 33 99 7 context 139 33 139 40 45 1 , 139 40 139 41 99 1 * 139 42 139 43 18446744073709551615 6 global 139 43 139 49 54 1 , 139 49 139 50 99 13 "XPluginStop" 139 51 139 64 18446744073709551615 1 , 139 64 139 65 99 4 args 139 66 139 70 107 1 , 139 70 139 71 99 1 & 139 72 139 73 18446744073709551615 4 rval 139 73 139 77 106 1 ) 139 77 139 78 99 1 ) 139 78 139 79 18446744073709551615 10 catchError 139 80 139 90 64 1 ( 139 90 139 91 64 7 context 139 91 139 98 45 1 ) 139 98 139 99 64 1 ; 139 99 139 100 18446744073709551615 1 } 140 5 140 6 18446744073709551615 5 catch 140 7 140 12 18446744073709551615 1 ( 140 13 140 14 18446744073709551615 13 jsPluginError 140 14 140 27 12 5 error 140 28 140 33 109 1 ) 140 33 140 34 18446744073709551615 1 { 140 35 140 36 18446744073709551615 4 Xlog 141 9 141 13 41 2 << 141 14 141 16 42 18 "Error in plugin " 141 17 141 35 18446744073709551615 1 + 141 36 141 37 44 4 name 141 38 141 42 28 1 + 141 43 141 44 44 4 ": " 141 45 141 49 18446744073709551615 1 + 141 50 141 51 44 10 parseError 141 52 141 62 101 1 ( 141 62 141 63 101 5 error 141 63 141 68 109 1 ) 141 68 141 69 101 1 ; 141 69 141 70 18446744073709551615 1 } 142 5 142 6 18446744073709551615 5 catch 142 7 142 12 18446744073709551615 1 ( 142 13 142 14 18446744073709551615 3 std 142 14 142 17 9 2 :: 142 17 142 19 18446744073709551615 6 string 142 19 142 25 10 5 error 142 26 142 31 110 1 ) 142 31 142 32 18446744073709551615 1 { 142 33 142 34 18446744073709551615 4 Xlog 143 9 143 13 41 2 << 143 14 143 16 42 18 "Error in plugin " 143 17 143 35 18446744073709551615 1 + 143 36 143 37 44 4 name 143 38 143 42 28 1 + 143 43 143 44 44 4 ": " 143 45 143 49 18446744073709551615 1 + 143 50 143 51 44 5 error 143 52 143 57 110 1 ; 143 57 143 58 18446744073709551615 1 } 144 5 144 6 18446744073709551615 6 delete 146 5 146 11 18446744073709551615 6 global 146 12 146 18 54 1 ; 146 18 146 19 18446744073709551615 17 JS_DestroyContext 147 5 147 22 111 1 ( 147 22 147 23 111 7 context 147 23 147 30 45 1 ) 147 30 147 31 111 1 ; 147 31 147 32 18446744073709551615 1 } 148 1 148 2 18446744073709551615 4 void 150 1 150 5 18446744073709551615 8 jsPlugin 150 6 150 14 8 2 :: 150 14 150 16 112 14 jsPluginEnable 150 16 150 30 112 1 ( 150 30 150 31 112 1 ) 150 31 150 32 112 1 { 150 33 150 34 18446744073709551615 1 } 152 1 152 2 18446744073709551615 4 void 154 1 154 5 18446744073709551615 8 jsPlugin 154 6 154 14 8 2 :: 154 14 154 16 113 15 jsPluginDisable 154 16 154 31 113 1 ( 154 31 154 32 113 1 ) 154 32 154 33 113 1 { 154 34 154 35 18446744073709551615 1 } 156 1 156 2 18446744073709551615 0 0 114 0 0 0 36 0 0 1 2 0 4 json 22 1 2 0 8 nlohmann 36 1 2 0 13 json:nlohmann 2 1 2 0 10 JSClassOps 9 1 2 0 14 globalclassops 8 1 2 0 24 JS_GlobalObjectTraceHook 2 1 2 0 7 JSClass 9 1 2 0 11 globalclass 4 1 2 0 8 jsPlugin 22 1 2 0 3 std 20 1 2 0 14 string:__1:std 10 1 2 0 55 31:32:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 5 1 2 0 13 jsPluginError 10 1 2 0 55 31:62:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 9 1 2 0 55 32:19:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 7 1 2 0 26 XJS_NO_ERROR:jsPluginError 9 1 2 0 55 40:10:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 20 1 2 0 16 ifstream:__1:std 9 1 2 0 55 42:23:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 24 1 2 0 22 basic_ifstream:__1:std 20 1 2 0 20 stringstream:__1:std 9 1 2 0 55 43:27:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 21 1 2 0 30 operator:basic_ostream:__1:std 21 1 2 0 28 rdbuf:basic_ifstream:__1:std 21 1 2 0 29 operator=:basic_json:nlohmann 21 1 2 0 25 parse:basic_json:nlohmann 21 1 2 0 30 str:basic_stringstream:__1:std 21 1 2 0 26 c_str:basic_string:__1:std 6 1 2 0 13 name:jsPlugin 21 1 2 0 30 operator=:basic_string:__1:std 21 1 2 0 30 operator[]:basic_json:nlohmann 21 1 2 0 23 get:basic_json:nlohmann 8 1 2 0 18 operator==:__1:std 6 1 2 0 13 type:jsPlugin 7 1 2 0 22 JS_GLOBAL:jsPluginType 7 1 2 0 24 JS_AIRCRAFT:jsPluginType 7 1 2 0 23 JS_SCENERY:jsPluginType 7 1 2 0 30 XJS_CONFIG_ERROR:jsPluginError 6 1 2 0 13 path:jsPlugin 21 1 2 0 27 substr:basic_string:__1:std 21 1 2 0 33 find_last_of:basic_string:__1:std 9 1 2 0 4 Xlog 21 1 2 0 16 operator:logtype 24 1 2 0 20 basic_string:__1:std 8 1 2 0 17 operator+:__1:std 6 1 2 0 16 context:jsPlugin 8 1 2 0 13 JS_NewContext 7 1 2 0 36 XJS_CONTEXT_INIT_ERROR:jsPluginError 22 1 2 0 2 JS 8 1 2 0 21 InitSelfHostedCode:JS 4 1 2 0 13 JSAutoRequest 9 1 2 0 55 69:19:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 4 1 2 0 21 CompartmentOptions:JS 9 1 2 0 55 71:28:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 6 1 2 0 15 global:jsPlugin 20 1 2 0 25 PersistentRootedObject:JS 24 1 2 0 19 PersistentRooted:JS 21 1 2 0 29 operator=:PersistentRooted:JS 8 1 2 0 18 JS_NewGlobalObject 7 1 2 0 44 FireOnNewGlobalHook:OnNewGlobalHookOption:JS 7 1 2 0 35 XJS_GLOBAL_INIT_ERROR:jsPluginError 4 1 2 0 17 JSAutoCompartment 9 1 2 0 55 83:23:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 8 1 2 0 22 JS_InitStandardClasses 8 1 2 0 10 catchError 8 1 2 0 14 initXJSClasses 9 1 2 0 55 90:15:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 21 1 2 0 25 begin:basic_json:nlohmann 21 1 2 0 36 operator!=:iter_impl:detail:nlohmann 21 1 2 0 23 end:basic_json:nlohmann 21 1 2 0 36 operator++:iter_impl:detail:nlohmann 9 1 2 0 55 91:21:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 21 1 2 0 35 operator*:iter_impl:detail:nlohmann 4 1 2 0 17 CompileOptions:JS 9 1 2 0 55 93:28:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 31 1 2 0 9 Rooted:JS 4 1 2 0 8 JSScript 9 1 2 0 55 94:31:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 20 1 2 0 15 RootedScript:JS 20 1 2 0 14 RootedValue:JS 9 1 2 0 55 96:25:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 20 1 2 0 4 FILE 9 1 2 0 55 97:16:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 8 1 2 0 5 fopen 8 1 2 0 10 Compile:JS 8 1 2 0 16 JS_ExecuteScript 8 1 2 0 6 fclose 9 1 2 0 56 109:25:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 9 1 2 0 56 110:25:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 31 1 2 0 17 AutoValueArray:JS 9 1 2 0 56 112:31:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 21 1 2 0 28 operator[]:AutoValueArray:JS 21 1 2 0 20 set:MutableHandle:JS 8 1 2 0 17 UndefinedValue:JS 8 1 2 0 14 JS_GetProperty 7 1 2 0 30 XJS_NO_FUNCTIONS:jsPluginError 21 1 2 0 27 isObject:ValueOperations:js 8 1 2 0 13 IsCallable:JS 21 1 2 0 27 toObject:ValueOperations:js 8 1 2 0 19 JS_CallFunctionName 9 1 2 0 56 124:24:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 8 1 2 0 10 parseError 9 1 2 0 56 127:22:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 9 1 2 0 56 134:23:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 9 1 2 0 56 135:27:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 21 1 2 0 23 get:PersistentRooted:JS 9 1 2 0 56 136:25:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 9 1 2 0 56 137:31:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 8 1 2 0 12 NullValue:JS 9 1 2 0 56 140:28:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 9 1 2 0 56 142:26:/Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 8 1 2 0 17 JS_DestroyContext 21 1 2 0 23 jsPluginEnable:jsPlugin 21 1 2 0 24 jsPluginDisable:jsPlugin 0 0 6 0 0 0 56 /Users/Jonas/Documents/XEcmaScript/src/XJS-functions.hpp 1528742770 46 /Users/Jonas/Documents/XEcmaScript/src/error.h 1528828432 48 /Users/Jonas/Documents/XEcmaScript/src/files.hpp 1528828467 46 /Users/Jonas/Documents/XEcmaScript/src/log.hpp 1528828479 49 /Users/Jonas/Documents/XEcmaScript/src/plugin.cpp 1528828507 49 /Users/Jonas/Documents/XEcmaScript/src/plugin.hpp 1528742770